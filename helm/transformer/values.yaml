# Default values for transformer
replicaCount: 1

# Image Configuration - Public ECR
# Format: public.ecr.aws/<registry-alias>/client-message-transformer
image:
  repository: "public.ecr.aws/aktosecurity/client-message-transformer"
  tag: 1.0.2
  pullPolicy: IfNotPresent

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  name: transformer

podAnnotations: {}

podSecurityContext:
  runAsNonRoot: true
  runAsUser: 1000
  fsGroup: 1000

securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
    - ALL
  readOnlyRootFilesystem: true

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 250m
    memory: 256Mi

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 3
  targetCPUUtilizationPercentage: 80

nodeSelector: {}

tolerations: []

affinity: {}

# Kafka Configuration (matches .env file)
kafka:
  source:
    brokers: "localhost:9092"
    topic: "client-messages"
    # SASL Authentication for Source Kafka
    sasl:
      enabled: false
      mechanism: "PLAIN"  # Options: PLAIN, SCRAM-SHA-256, SCRAM-SHA-512
      username: ""
      password: ""
      securityProtocol: "SASL_PLAINTEXT"  # Options: SASL_PLAINTEXT, SASL_SSL
  destination:
    brokers: "localhost:9093"
    topic: "akto.api.logs"
    # SASL Authentication for Destination Kafka
    sasl:
      enabled: false
      mechanism: "PLAIN"  # Options: PLAIN, SCRAM-SHA-256, SCRAM-SHA-512
      username: ""
      password: ""
      securityProtocol: "SASL_PLAINTEXT"  # Options: SASL_PLAINTEXT, SASL_SSL
  consumerGroup: "message-transformer-group"

# Client Configuration (matches .env file)
client:
  id: "1000000"

# Logging (matches .env file)
logging:
  level: "INFO"

# Restart policy
restartPolicy: Always
